generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma" // Verifique se este caminho está correto para sua estrutura
}

datasource db {
  provider = "postgresql" // Correto para Neon
  url      = env("DATABASE_URL")
}

model cliente {
  id_cliente                   BigInt
  tipoClienteIdFK              BigInt       @map("tipo_cliente")
  cpf_cnpj                     BigInt
  nome                         String
  nome_reduzido                String?
  endereco                     String
  telefone                     BigInt       @map("tefelone")
  empresa_id_empresa           BigInt
  tipo_cliente_id_tipo_cliente BigInt
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao             String       @default("SYSTEM")
  Data_Hora_Inclusao           DateTime     @default(now())
  Usuario_Alteracao            String?
  Data_Hora_Alteracao          DateTime?

  empresa      empresa      @relation(fields: [empresa_id_empresa], references: [id_empresa], onDelete: NoAction, onUpdate: NoAction, map: "fk_cliente_empresa")
  tipo_cliente tipo_cliente @relation(fields: [tipo_cliente_id_tipo_cliente], references: [id_tipo_cliente], onDelete: NoAction, onUpdate: NoAction, map: "fk_cliente_tipo_cliente1")
  pedido       pedido[]

  @@id([id_cliente, empresa_id_empresa, tipo_cliente_id_tipo_cliente])
  @@index([empresa_id_empresa], map: "fk_cliente_empresa_idx")
  @@index([tipo_cliente_id_tipo_cliente], map: "fk_cliente_tipo_cliente1_idx")
}

model empresa {
  id_empresa        BigInt    @id
  cnpj              BigInt
  razao_social      String
  nome_fantasia     String?
  endereco          String
  matriz_filial     Int?
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao  String    @default("SYSTEM")
  Data_Hora_Inclusao DateTime @default(now())
  Usuario_Alteracao String?
  Data_Hora_Alteracao DateTime?
  cliente           cliente[]
  pedido            pedido[]
}

model estoque {
  id_estoque                              BigInt
  qtd_produto                             Decimal
  qtd_reservada                           Decimal
  produto_id_produto                      BigInt
  produto_unidade_medida_id_unidade_medida BigInt
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao                        String    @default("SYSTEM")
  Data_Hora_Inclusao                      DateTime @default(now())
  Usuario_Alteracao                       String?
  Data_Hora_Alteracao                     DateTime?
  produto                                 produto   @relation(fields: [produto_id_produto, produto_unidade_medida_id_unidade_medida], references: [id_produto, unidade_medida_id_unidade_medida], onDelete: NoAction, onUpdate: NoAction, map: "fk_estoque_produto1")

  @@id([id_estoque, produto_id_produto, produto_unidade_medida_id_unidade_medida])
  @@index([produto_id_produto, produto_unidade_medida_id_unidade_medida], map: "fk_estoque_produto1_idx")
}

model leads {
  id_lead    BigInt  @id
  cpf_lead   BigInt
  nome_lead  String
  endereco   String?
  telefone   BigInt?
  id_empresa BigInt
}

model pedido {
  id_pedido                                BigInt
  qtd_comprada_item                        Decimal
  valor_total_item                         Decimal
  produto_id_produto                       BigInt
  produto_unidade_medida_id_unidade_medida BigInt
  cliente_id_cliente                       BigInt
  cliente_empresa_id_empresa               BigInt
  cliente_tipo_cliente_id_tipo_cliente     BigInt
  empresa_id_empresa                       BigInt
  numero_pedido                            BigInt
  data_pedido                              DateTime
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao                         String   @default("SYSTEM")
  Data_Hora_Inclusao                       DateTime @default(now())
  Usuario_Alteracao                        String?
  Data_Hora_Alteracao                      DateTime?

  cliente cliente @relation(fields: [cliente_id_cliente, cliente_empresa_id_empresa, cliente_tipo_cliente_id_tipo_cliente], references: [id_cliente, empresa_id_empresa, tipo_cliente_id_tipo_cliente], onDelete: NoAction, onUpdate: NoAction, map: "fk_pedido_cliente1")
  empresa empresa @relation(fields: [empresa_id_empresa], references: [id_empresa], onDelete: NoAction, onUpdate: NoAction, map: "fk_pedido_empresa1")
  produto produto @relation(fields: [produto_id_produto, produto_unidade_medida_id_unidade_medida], references: [id_produto, unidade_medida_id_unidade_medida], onDelete: NoAction, onUpdate: NoAction, map: "fk_pedido_produto1")

  @@id([id_pedido, produto_id_produto, produto_unidade_medida_id_unidade_medida, cliente_id_cliente, cliente_empresa_id_empresa, cliente_tipo_cliente_id_tipo_cliente, empresa_id_empresa])
  @@index([cliente_id_cliente, cliente_empresa_id_empresa, cliente_tipo_cliente_id_tipo_cliente], map: "fk_pedido_cliente1_idx")
  @@index([empresa_id_empresa], map: "fk_pedido_empresa1_idx")
  @@index([produto_id_produto, produto_unidade_medida_id_unidade_medida], map: "fk_pedido_produto1_idx")
}

model produto {
  id_produto                      BigInt
  descricao                       String
  unidadeMedidaIdFK               BigInt     @map("unidade_medida")
  valor_unitario                  Decimal
  unidade_medida_id_unidade_medida BigInt
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao                String     @default("SYSTEM")
  Data_Hora_Inclusao              DateTime   @default(now())
  Usuario_Alteracao               String?
  Data_Hora_Alteracao             DateTime?

  estoque        estoque[]
  pedido         pedido[]
  unidade_medida unidade_medida @relation(fields: [unidade_medida_id_unidade_medida], references: [id_unidade_medida], onDelete: NoAction, onUpdate: NoAction, map: "fk_produto_unidade_medida1")

  @@id([id_produto, unidade_medida_id_unidade_medida])
  @@index([unidade_medida_id_unidade_medida], map: "fk_produto_unidade_medida1_idx")
}

model tipo_cliente {
  id_tipo_cliente   BigInt    @id
  tipo_cliente      String
  ativo             Int
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao  String    @default("SYSTEM")
  Data_Hora_Inclusao DateTime @default(now())
  Usuario_Alteracao String?
  Data_Hora_Alteracao DateTime?
  cliente           cliente[]
}

model unidade_medida {
  id_unidade_medida BigInt    @id
  descricao         String
  ativo             Int
  descricao_reduzida String?
  // CORREÇÃO: Usando a capitalização exata do banco de dados
  Usuario_Inclusao  String    @default("SYSTEM")
  Data_Hora_Inclusao DateTime @default(now())
  Usuario_Alteracao String?
  Data_Hora_Alteracao DateTime?
  produto           produto[]
}